sudo: required

services:
  - docker

# It is not really needed, other than for showing correct language tag in Travis CI build log.
language: cpp

env:
  matrix:
    - CC_VER: "5"
    - CC_VER: "6"

before_install:
  - docker run -d --name ubuntu-test -v $(pwd):/travis ubuntu:latest tail -f /dev/null
  - docker ps

install:
  - docker exec - t ubuntu-test bash -c "apt-get update;
    apt-get install -y software-properties-common python-software-properties;
    apt-get install -y build-essential cmake libboost-thread-dev libboost-date-time-dev;
    add-apt-repository ppa:ubuntu-toolchain-r/test;
    apt-get update;
    apt-get install -y gcc-$CC_VER"

script:
  - docker exec -t ubuntu-test bash -c "cd /travis;
    set CC=gcc-$CC_VER;
    set CXX=g++-$CC_VER;
    cmake .;
    make;
    ls;
    chmod +x test;
    ./test"
notifications:
    email: false
